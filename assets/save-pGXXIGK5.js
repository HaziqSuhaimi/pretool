(function(){self.onmessage=async e=>{let{file:t,dir:n}=e.data,r=await(await navigator.storage.getDirectory()).getDirectoryHandle(n,{create:!0}),i=await r.getFileHandle(t.name,{create:!0}),a=await i.createSyncAccessHandle();try{let e=await t.arrayBuffer();a.write(e,{at:0}),a.flush(),self.postMessage({code:`SUCCESS`,data:{filename:t.name,opfsPath:`${r.name}/${i.name}`},message:`Wrote ${t.name} synchronously to OPFS.`})}catch(e){self.postMessage({code:`ERROR`,message:`error occured: ${e}`})}finally{self.postMessage({code:`CLOSE`,message:``}),a.close()}}})();